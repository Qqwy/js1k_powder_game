<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
</head>
<!-- easy html page for testing, since the code can just be loaded from the script tag instead of copy/pasted -->
<!-- copy pasting can still be used for example for minified code -->
<body>
<canvas id="canvas" width="900px" height="500px">
</canvas>
<script>
window.a = document.getElementById("canvas");
window.c = a.getContext("2d");


</script>
<script src="debugfunctions.js"></script>
<script src="powdergame_cells.js">

//for(_='00~ffW~0V"ba87a7777df0733f30W7V07fd~aaa7W73~9097507~90f0f0WW0a0Wa7105"T+T[h]Snew R=RUintQArrayPQ32P(O]|=N83cL4E5Ka&J0xHJHG,HFF3$B[#t[=4;-4<80&&);.fill(H(a>>0+*d=b),16=r.oWsetImageData(&15)+7]^p)--;)=r=>128<<for(&192)<(J192)||;onmouse	(#d]Math.random()+((-.5)*(1+(J6))|0)a=19,&l&A=26+[1,-1,,-][4*|0],,l=G7V0&7e=f=g=p=n=0;BOKB1Vt=[H3e8bcb$4Lb,193F81c08fF47834fF91e848d$9~c06dF1VF7fb18fF9068477,473F130b81c1$7cdL1F1f3F9db,599F4036L1F5b3F6VabF5Vab$4d3cbFa90ef$9f357];u={};h inT)u[h/3|0]N("H"SS|0)<<h%3*8;m=RPBuWer(E5wOmvQ8ClampedP(m)	downe=1	upe=0	move{fX;gY};onwheeln+=0<r.deltaY||11;setInterval(r=>{wWVVyyxxe#fg+xy]=n%12]^ph=12;hw[+*h+xy+Hc*(h==n%12)+HcNu[h]];p^=1;b=K;ba=#b],a^H1V1&a)==pA=G3V23&7)w[bNu[a|1],J32.1>G0G4VV0?(-,):()((J81)-(J.5<)K>d0<dJ4#](G0||(#b]=,=a^1c.putRv,,5~0,0)},)';G=/[^ "%-EIMUX-}]/.exec(_);)with(_.split(G))_=join(shift());eval(_)

//e=p=n=0;r=new Uint32Array(4E5);r.fill(0x1000);t=[0x3e8bcb,0x3483cb,193,0x10a1c08f,0x47834f,0x516848d,0x3920c06d,0x7fb18f,0x5268477,473,0xf0381c1,0x1000,0x37cd83c1,0x16a001f3,0x9db,599,0x403683c1,0x5800b3,0x6000ab,0x5000ab,0x34d380cb,0x68880ef,0x39f38057];u={};for(h in"ba87a7777df0733f30ff707fd00aaa7ff000730090975070090f0f0ffff0a0ffa7105")u[t[h/3|0]]|=("0x"+"ba87a7777df0733f30ff707fd00aaa7ff000730090975070090f0f0ffff0a0ffa7105"[h]+"ba87a7777df0733f30ff707fd00aaa7ff000730090975070090f0f0ffff0a0ffa7105"[h]|0)<<h%3*8;m=new ArrayBuffer(16E5);w=new Uint32Array(m);v=new Uint8ClampedArray(m);onmousedown=q=>e=1;onmouseup=q=>e=0;onmousemove=q=>{f=q.offsetX;g=q.offsetY};onwheel=q=>n+=0<q.deltaY||11;setInterval(q=>{w.fill(0xff000000);for(y=4;-4<y--;)for(x=4;-4<x--;)for(e&&(r[f+800*g+x+800*y]=t[n%12]^p),h=12;h--;)w[16+16*h+x+800*y+0xc80*(h==n%12)+0xc80]|=u[t[h]];p^=1;for(b=4E5;b--;)a=r[b],a^0x1000&&(1&a)==p&&(k=a&0x3800000&&128<<(a>>23&7),l=a&0x70000&&128<<(a>>16&7),w[b]|=u[a|1],a&32&&.1>Math.random()&&(a=t[(a>>19&15)+7]^p),a&0x8000&&(a&0x40000000?(d=b-800,r[d]&l&&(a=t[(a>>19&15)+7]^p),r[d]&k&&(r[d]=t[(a>>26&15)+7]^p)):(d=b+[1,-1,800,-800][4*Math.random()|0],r[d]&l&&(a=t[(a>>19&15)+7]^p),r[d]&k&&(r[d]=t[(a>>26&15)+7]^p),k=a&0x3800000&&128<<(a>>23&7),l=a&0x70000&&128<<(a>>16&7),d=b+[1,-1,800,-800][4*Math.random()|0],r[d]&l&&(a=t[(a>>19&15)+7]^p),r[d]&k&&(r[d]=t[(a>>26&15)+7]^p))),d=b+((Math.random()-.5)*(1+(a&6))|0)+800*((a&8&&1)-(a&16&&.5<Math.random())),4E5>d&&0<d&&(r[d]&192)<(a&192)||a&4&&(r[d=b+((Math.random()-.5)*(1+(a&6))|0)]&192)<(a&192)||(d=b),a&0x8000||(r[d]&l&&(a=t[(a>>19&15)+7]^p),r[d]&k&&(r[d]=t[(a>>26&15)+7]^p)),r[b]=r[d],r[d]=a^1);c.putImageData(new ImageData(v,800,500),0,0)},16)

//for(_='0x~,~WW3V00T8TS+S*R]|=Q4E5Pr[O&&N);LffKT0J"ba87a7777df0733f30K707fdTaaa7KJ73T9097507T90f0f0KK0a0Ka7105"H+H[h]G83c1WF+~c80$u[t[h#d=b!(a&+xRy=4;-4<new ),16=t[(a>>Array.fill(~--;)=B=>=B.oKset=UintImageData(&15)+7]^p)Od]a&~for(N128<<(a>>N(;onmouse	]&192)<192)||32(Math.random()!+((-.5)*(1+6))|0)a19,&l&A26!+[1,-1,S,-S][4*|0],A=38JT23&7l=7J0&7p=n=0;rPLr1JLt=[~3e8bcbV483cb,193W10a1c08fW47834fW5848dV920c06dW7fb18fW5268477,473Wf0381c1W1JV7cdFaT1f3W9db,599W4036F5Sb3W6JabW5JabV4d380cbW68880efV9f38057];u={};h inH)#/3|0]Q("~"GG|0)<<h%3*8;m=BuKer(E5LwmLv8Clamped(m)	downe=1	upe=0	move{fX;gY};onwheeln+=0<B.deltaY||11;setInterval(B=>{wKJJLyyxxeOfRg]=t[n%12]^ph=12;hw[+*h$*(h==n%12)$Q#]];p^=1;b=P;ba=Ob],a^~1J1&a)==pw[bQu[a|1],a&32N.1>8J4JJ0!-S,)||(,)R(8N1)-N.5<)P>dN0<dOda&4O(!8J||(Ob]=,=a^1Lc.putv,S,5T0,0)},)';G=/[^ "%-EIMUX-}]/.exec(_);)with(_.split(G))_=join(shift());eval(_)

//for(_='07~ffW00VV0T"ba87a7777W~33f3TV7fdVaaa7W77V90975~V90f0f0WW0a0f"S+S[h]Rnew Q=QUintPArrayOP32O(N0xL+Lc80K,LJc1JHd=bG]|=F4E5!256B[t[=4;-4<&&);.fill(L(a>>8V+*16),=r.oWsetImageData(&15)+6]^p)--;)=r=>a&<<for(&192)<(192)||	;onmouse(d]Math.random()G+((-.5)*(1+(6))|0)a=19,&l&A=26G+[1,-1,,-][4*|0],p=n=e=f=g=0;BN!B2Tt=[L3e17cbJ34~cb,193J81818fJ47~4fJ91e098dJ2TJ628fJ9060977,729J130b03H37cd~H2f3J12dbJ457J36~H5b3J6TabJ5TabJ34d301cb];u={};h inS)u[h/3|0]F("L"RR|0)<<h%3*8;m=QOBuWer(E5wNmvP8ClampedO(m)downe=1upe=0move{fX;gY};onwheeln+=0<r.deltaY||10;setInterval(r=>{wWTTyyxxefg+xy]=n%11]^ph=11;hw[+*h+xyK*(h==n%11)KFu[h]];p^=1;b=!;ba=b],a^L2T1&a)==pA=L3T23&7l=L7T0&7w[bFu[a|1],32.1>,((81)-(.5<)!>d0<d	4]	(G||(b]=,=a^1c.putQv,,5V0,0)},)';G=/[^ "-EIMUX-}]/.exec(_);)with(_.split(G))_=join(shift());eval(_)


//for(_='00~ffW0xV~0T"8ab7aV12fcaWV83a7fTf7~ddaaaWV283a87a108a8af0Wf~Wf0a"S+S[h]Rnew Q=QUintPArrayOP32O(N+Vc80Ld=bK]|=J4E5H256GB[Ft[7c=4;-4<&&.fill(V(a>>8~+*);16),=r.oWsetImageData(&15)+6]^p)--;)=r=>a&G<<for(&192)<(192)||;onmouse	(Fd]Math.random()K+((-.5)*(1+(6))|0)a=19,&l&A=26K+[1,-1,,-][4*|0],,Vp=n=e=f=g=0;BNHB2Tt=[V3e1b340b,19381818f47074f91e098d2T628f9060977,729130b03c13d012f312db45736015b36Tab5Tab34d301cb];u={};h inS)u[h/3|0]J("V"RR|0)<<8*(2-h%3m=QOBuWer(E5wNmvP8ClampedO(m)	downe=1	upe=0	move{fX;gY};onwheeln+=0<r.deltaY||10;setInterval(r=>{wWTTyyxxeFfg+xy]=n%11]^ph=11;hw[+*h+xyL*(h==n%11)LJu[h]];p^=1;b=H;ba=Fb],a^V2T1&a)==pA=V3T23&7l=V7T0&7w[bJu[a|1],32.1>G,((81)-(.5<)H>d0<d4F](KG||(Fb]=,=a^1c.putQv,,5~0,0)},)';G=/[^ -EIMUX-}]/.exec(_);)with(_.split(G))_=join(shift());eval(_)

//p=n=e=f=g=0;r=new Uint32Array(4E5);r.fill(0x4000);t=[0x3e2dcb,0xc48f,0x9061177,0x340dcb,193,0x81018f,0x470d4f,0x94e118d,0x130b05c1,0x4d9,0x60007b,0x4000];u=[0x4000,0xc48f,0x9061177,193,0x130b05c1,0x550dc1,0x168004f3,0x24db,0x857,0x4d9,0x360dc1,0x60007b,0x68007b,0x58007b];v={0x3e2dcb:0x88aabb,0x24db:0x557799,0xc48f:0xff7722,0x470d4f:0x333377,0x9061177:221,193:0x888888,0x857:0x6600,0x168004f3:0x9900,0x340dcb:0x66aa66,0x550dc1:0x7788,0x4d9:0xbbbbbb,0x81018f:0xffff,0x94e118d:0x33ff,0x360dc1:0x9900,0x130b05c1:0xffff77,0x60007b:0xff00ff,0x68007b:0xffff00,0x58007b:0xffff};m=new ArrayBuffer(16E5);z=new Uint32Array(m);w=new Uint8ClampedArray(m);onmousedown=q=>e=1;onmouseup=q=>e=0;onmousemove=q=>{f=q.offsetX;g=q.offsetY};onwheel=q=>n+=0<q.deltaY||12;setInterval(q=>{z.fill(0xff000000);for(y=4;-4<y--;)for(x=4;-4<x--;)for(e&&(r[f+800*g+x+800*y]=t[n%13]^p),h=13;h--;)z[16+16*h+x+800*y+0xc80*(h==n%13)+0xc80]|=v[t[h]];p^=1;for(b=4E5;b--;)a=r[b],a^0x4000&&(1&a)==p&&(k=a&0x3800000&&512<<(a>>23&7),l=a&0x70000&&512<<(a>>16&7),z[b]|=v[a|1],a&32&&.1>Math.random()&&(a=u[a>>19&15]^p),a&256&&(d=b+[1,-1,800,-800][4*Math.random()|0],r[d]&l&&(a=u[a>>19&15]^p),r[d]&k&&(r[d]=u[a>>26&15]^p),d=b+[1,-1,800,-800][4*Math.random()|0],r[d]&l&&(a=u[a>>19&15]^p),r[d]&k&&(r[d]=u[a>>26&15]^p)),d=b+((Math.random()-.5)*(1+(a&6))|0)+800*((a&8&&1)-(a&16&&.5<Math.random())),4E5>d&&0<d&&(r[d]&192)<(a&192)||a&4&&(r[d=b+((Math.random()-.5)*(1+(a&6))|0)]&192)<(a&192)||(d=b),a&256||(r[d]&l&&(a=u[a>>19&15]^p),r[d]&k&&(r[d]=u[a>>26&15]^p)),r[b]=r[d],r[d]=a^1);c.putImageData(new ImageData(w,800,500),0,0)},16)

//_='p=n=e=f=g=0;rWO(r8Tt=[~,~];u={51:89603	1:0$77,2"5:R7421785:33555$?3:221,193:8947848,$$:26$2`27:6728294,R601:123091/7:65535@"8957:133$`13:R759739};m=OBuffer(RE5wWO(mvW8ClampedO(m)Se=1}Sup=qe=0}Smove=qAfFX;gFY};onkeyAn=A.which%R};setInterval(qw42781980LyyLBBLe#fg+By]=t[n]^pGh=10;--h;)w[R*h+By+64*(h==n)t[h]|1];p^=1;Lb=;ba=b],a^8TQ1&a^p#k=N458752JR&7Gl=N587202J23&7Gw[ba|1],NQ.1>xZN2#j,jG_(!!(N8)-(NRQ.5<x)G>dQ0<d#VHN4#_]H(GN2||(zGb]=V,V=a^1c.putKKv,P@G0,0)},R)~8T@0,2"4?2`26,T/64@"892`R6	0,$10,R6`RzV&lZV&k#V15)xMath.random()qfunction(j+[1,-1,P,-P][4*x|0],z`,6294_+((x-.5)*(1+(N6))|0)Z#a22GW=UintVd]T192S;onmouseR16Q&&P8OArrayNa&Lfor(KImageData(JQ512<<(a>>H&T)<(NT)||G),F=A.offset@,5?,2526450/,4230388$11#Q("881+P*new --;)&240]^p@45436956);874017.fill(,34430=8;-8<=t[a>>7:39R8down=q3200){r[4E5d=b	,1865]|=u[@0835';for(i of'	"#$/?@FGHJKLNOPQRSTVWZ_`jqxz~')with(_.split(i))_=join(pop());eval(_)


//for(_='32~,49~0`]|=u[_,1865Z,2881Wd=bV4E5Tr[S){R56Qfunction(Pdown=PO16N,552N5L&15]^pK=t[a>>J=4;-4<H.fill(G);F&&$,966~87#--;)"new $(11,763388,4230388,268045983049210=A.offset,92276462),a&192&)<()||$512<<(a>>ImageData(,1040205248,7549925800+8*for(Array	;onmouseSd]=UintaJ26K)Math.random()V+((-.5)*(1+(6))|0)&kJ19K&lV+[1,-1,8,-8][4*|0],p=n=e=f=g=0;r~	(TFrG8Ft=[8,6W46,62#N`~8L0Z0,10,N64];u={7:89Q603Z1:Q077W5:N7421783:335559:221,193:8947848,:262L1:39N7:67282949:306,N601:1230~917:65535#17:1335:39N8`33:N759739};m=	Buffer(NE5Fw~	(mFv8Clamped	(m)ORe=1}up=PRe=0}move=PARfX;gY};onkeyOARn=A.which%N};setInterval(PRwG42781980FyHy"BHB"eSfg+By]=t[n]^ph=10;--h;)w[N*h+By+~*(h==n)+~_t[h]|1];p^=1;b=T;b"a=Sb],a^8$1&a^pk=458752N&7l=587202Q23&7w[b_a|1],~$.1>,2Q,(!!(8)-(N$.5<)T>d$0<d4S](V2Q||(Sb]=,=a^1Fc.putv,8,50,0)},N)';G=/[^ !%-EIMUXY[-^a-}]/.exec(_);)with(_.split(G))_=join(shift());eval(_)

//for(_='=A=>~down~`]|=u[_,3708\,5748Zd=bW4E5V256Tr[S00R8RQ19P&15]^pO=t[a>>N,49484L.fill(K);J32H&&G,553803Fnew @16??384$88#G("ff=A.oset,755R999=8;-8<--,966H87,4227111,268045983051156,76339859,92278203bb),ImageData(,104022265+Q*for(a&G0xQ<<(a>>Array&P2)<(P2)||;onmouse	Sd]=@Uint"aN26O)Math.random()W+((-.5)*(1+(6))|0)&k"NPO&lW+[1,-1,Q,-Q][4*|0],:0xp=n=e=f=g=0;rH(VJrK$Jt=[$,2Z684,P280?L?6F4\2,2134,H9842];u={3#aa\3557799Z7772213333779dd,P3###,213566RF599R566aa66777#,H98591733399RL17};m=@Buer(?E5JwH(mJv8Clamped(m)	`e=1	up~e=0	move~{fX;gY};onkey`n=A.which%?;setInterval(A=>{wK0xRRRJyy;)xx;)e"Sfg+xy]=t[n]^ph=10;--h;)w[?*h+xy+64R*(h==n)_t[h]|1];p^=1;b=V;b--;)a=Sb],a^$G1&a^p"k=458752?&7l=58720T23&7w[b_a|1],HG.1>,T",(!!(8)-(?G.5<)V>dG0<d"4"S](WT||(Sb]=,=a^1Jc.put@v,Q,5R0,0)},?)';G=/[^ !%->A-EIMUXY[\]^a-}]/.exec(_);)with(_.split(G))_=join(shift());eval(_)

//for(_='84~=9;zfor(x;)xBz`=A=>_down_Z11W22V,4V7WT,494~S]|=u[R-9<--Q,3708P,5748Od=bN4E5L16KK3~Jr[H&15]^pG=t[a>>F.fill(@56?8305W?$&&##("32,96687,553803--;)new );1900,755999,2680459),=A.offset,76339859ImageData(,1040V2658,9V78203+8*a&#1024<<(a>>Array&2)<(2)||	;onmouseHd]=Uint"aF26G)Math.random()N+((-.5)*(1+(6))|0)&k"FG&lN+[1,-1,8,-8][4*|0],p=n=e=f=g=0;r(Lr@Jt=[J,$2O684,2T10KSK64P2,2134,9~2];u={$3:89?603P3:?0W77O7:K742171:33555W9:V1,3:8947~8,2135:26W25:5V245:67282947:306,985:123091T:6553517:133W3:39K8S17:K759739};m=Buffer(KE5w(mv8Clamped(m)Ze=1up_e=0move_{fX;gY};onkeyZn=A.which%K;setInterval(A=>{xyze#Qy`QB;)Hf+Bgy]=t[n]^p;p^=1;w@427880xb=L;ba=Hb],a^J#1&a^p"k=458752K&7l=587202?23&7w[bRa|1],#.1>,2?",(!!(8)-(K#.5<)L>d#0<d"	4"H]	(N2?||(Hb]=,=a^1xh=10;--h`Bxyzyw[B+K*hy+72*(h==n)Rt[h]|1];c.putv,8,50,0)},K';G=/[^ !%->A-EIMUXY[-^a-wy{-}]/.exec(_);)with(_.split(G))_=join(shift());eval(_)




//for(_='84~=r=>zdownzx,494~`]|=u[_,3708Z,5748W=9;V4E5T16SS3~R;)Q--P1,O&15]^pN=t[a>>L.fill(K56J11H8305HJG],F00@);?32$,966$87#,553803"new 8@+*A[b&&(19for(QBV-,268045922=r.offset,76339859,755@999ImageData(,10402658,978203a&),1024<<(a>>Array	A[d;onmouse]&2)<(2)||]LN=UintaL26N)Math.random()h=[O-O,-][4*|0Fk=+hFk&l+hk&mn=0,p=OA$	(T?AKR?t=[R,G2W684,2,47H10#S`S6"4Z2,2134,$9~2Fu={G3:89J603Z3:J0H77W7:S742171:33555H9:O3:8947~8,2135:26H2"5:5245:67282947:306@,$985:1230$9O47H:65535#17:133H3:39S8`17:S759739},v=	Buffer(SE5w$	(vC8Clamped	(v?e=0;f=g=-1xe=1upze=0movez{fX;gY};onkeyxn=r.which%S;setInterval(r=>{yVe-9<Py9<PBQA[f+B(g+y)]=t[n]^p^1;wK4278@80?b=T;bPQa=Fa^R1&a^pl=458752S&7m=587202J23&7w[b_a|1F$.1>,2J,d=b(!!(8)-(S.5<))+((-.5)*(1+(6))|0T>d0<d4=d%(b/|0)(d=b2J||(]&l]&m]=F]=a^1?h=10;Ph-BQyVPyQw[B+S*h%y+72@*(h==n)_t[h]|1];c.putC,,5@0,0?p^=1},S)';G=/[^ !%->A-EIMUXY[-^a-wy{-}]/.exec(_);)with(_.split(G))_=join(shift());eval(_)
//n=0,p=1,q=new Uint32Array(4E5);q.fill(16384);t=[16384,830511562,57486,26804598,755009994,192,42271118,922782030,966328716,4948416,1040222656,5538034,37082,2134,32984,763398592],u={830511563:8956603,37083:5601177,57487:16742178,922782031:3355511,26804599:221,193:8947848,2135:26112,5538035:52224,755009995:6728294,1040222657:30600,32985:12303291,42271119:65535,966328717:13311,763398593:39168,4948417:16759739},v=new ArrayBuffer(16E5),w=new Uint32Array(v),z=new Uint8ClampedArray(v);e=0;f=g=-1;onmousedown=r=>e=1;onmouseup=r=>e=0;onmousemove=r=>{f=r.offsetX;g=r.offsetY};onkeydown=r=>n=r.which%16;setInterval(r=>{for(y=9;e&&-9<--y;)for(x=9;-9<--x;)q[f+x+800*(g+y)]=t[n]^p^1;w.fill(4278190080);for(b=4E5;b--;)a=q[b],a^16384&&1&a^p&&(l=a&458752&&1024<<(a>>16&7),m=a&58720256&&1024<<(a>>23&7),w[b]|=u[a|1],a&32&&.1>Math.random()&&(a=t[a>>26&15]^p),a&256&&(h=[1,-1,800,-800][4*Math.random()|0],k=q[b+h],k&l&&(q[b+h]=t[a>>19&15]^p),k&m&&(a=t[a>>26&15]^p),h=[1,-1,800,-800][4*Math.random()|0],k=q[b+h],k&l&&(q[b+h]=t[a>>19&15]^p),k&m&&(a=t[a>>26&15]^p)),d=b+800*(!!(a&8)-(a&16&&.5<Math.random()))+((Math.random()-.5)*(1+(a&6))|0),4E5>d&&0<d&&(q[d]&192)<(a&192)||a&4&&(q[d=d%800+800*(b/800|0)]&192)<(a&192)||(d=b),a&256||(q[d]&l&&(q[d]=t[a>>19&15]^p),q[d]&m&&(a=t[a>>26&15]^p)),q[b]=q[d],q[d]=a^1);for(h=10;--h;)for(x=9;--x;)for(y=9;--y;)w[x+16*h%800+800*y+7200*(h==n)]|=u[t[h]|1];c.putImageData(new ImageData(z,800,500),0,0);p^=1},16)



</script>
</body>
</html>
