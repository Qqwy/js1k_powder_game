<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
</head>
<!-- easy html page for testing, since the code can just be loaded from the script tag instead of copy/pasted -->
<!-- copy pasting can still be used for example for minified code -->
<body>
<canvas id="canvas" width="900px" height="600px">
</canvas>
<script>
    window.a = document.getElementById("canvas");
    window.c = a.getContext("2d");
</script>
<script src="powdergame.js">
// objectlist
//q=[];r=[];for(i=0;1E4>i;i++)r[i]=[3,16E4*Math.random()|0],i<400&&(q[16E4+i]=1);setInterval(()=>{c.clearRect(0,0,400,400);for (v of r)[t,u]=v,c.fillRect(u%400,u/400|0,1,1),t&2&&!(q[u+400]&1)&&(q[u+400]=t,q[u]=0,v[1]+=400)},30)
//u=[],v=[];for(i=0;1E4>i;i++)v[i]=[3,2E5*Math.random()|0];setInterval(()=>{c.clearRect(0,0,500,400);for(t of v)[q,r]=t,c.fillRect(r%500,r/500|0,1,1),q&2&&1^u[r+500]&1&&2E5>r&&(u[r+500]=q,u[r]=0,t[1]+=500)},30)



// cellmoving
//b=[];for(i=0;1E4>i;i++)b[16E4*Math.random()|0]=6,400>i&&(b[16E4+i]=2);a=1;setInterval(()=>{c.clearRect(0,0,400,400);for(i=0;16E4>i;i++)b[i]&&(c.fillRect(i%400,i/400|0,1,1),1&b[i]^a&&(b[i]^=1,b[i]&4&&2^b[i+400]&2&&(b[i+400]=b[i],b[i]=0)));a^=1},30);
</script>
</body>
</html>
