<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" />
</head>
<!-- easy html page for testing, since the code can just be loaded from the script tag instead of copy/pasted -->
<!-- copy pasting can still be used for example for minified code -->
<body>
<canvas id="canvas" width="900px" height="500px">
</canvas>
<script>
window.a = document.getElementById("canvas");
window.c = a.getContext("2d");


</script>
<script src="debugfunctions.js"></script>
<script src="powdergame_cells.js">
// objectlist
//u=[],v=[];for(i=0;1E4>i;i++)v[i]=[3,2E5*Math.random()|0];setInterval(()=>{c.clearRect(0,0,500,400);for(t of v)[q,r]=t,c.fillRect(r%500,r/500|0,1,1),q&2&&1^u[r+500]&1&&2E5>r&&(u[r+500]=q,u[r]=0,t[1]+=500)},30)

// powdergame
//v=[],w=[];for(i=0;1E4>i;i++)w[i]=[3,2E5*Math.random()|0],v[500*i]=1;setInterval(()=>{c.clearRect(0,0,500,400);for(t of w)[q,r]=t,c.fillRect(r%500,r/500|0,1,1),q&2&&2E5>r&&(u=500+(2.4*Math.random()-1.2|0),1^v[r+u]&1&&(v[r+u]=q,v[r]=0,t[1]+=u))},30)

//v=[],w=[];for(i=1E4;i--;)w[i]=[7,2E5*Math.random()|0],v[500*i]=1;setInterval(()=>{c.clearRect(0,0,500,400);for(t of w)if([q,r]=t,c.fillRect(r%500,r/500|0,1,1),q&2&&2E5>r&&(u=r+500+(2.4*Math.random()-1.2|0),1^v[u]&1||q&4&&1^v[u-=500]&1))v[u]=q,v[r]=0,t[1]=u},30)

// powdergame_refs
//v=[],w=[],x={57:"#ba8",31:"#22f"};for(i=1E4;i--;)w[i]=[31,2E5*Math.random()|0],v[500*i]=48;for(i=0;3e5>i;i++)v[i]=[];setInterval(_=>{c.clearRect(0,0,500,400);for(t of w)if([q,r]=t,c.fillStyle=x[q],c.fillRect(r%500,r/500|0,1,1),q&8&&2E5>r&&(u=r+500+(Math.random()<.3*(q&3))*(.5<Math.random()?1:-1),(v[u][0]&48)<(q&48)||q&4&&(v[u-=500][0]&48)<(q&48)))v[u][1]=r,v[r]=v[u],v[u]=t,t[1]=u},30);onmousedown=a=>{for(i=20;i--;)w.push([57,a.offsetX+500*a.offsetY])}

// v=0,w=[],x=[],y=[313,47,722,56,82],z={313:"#ba8",47:"#22f",722:"#f00",56:"#888",82:"#445"};for(i=3E5;i--;)w[i]=[];for(i=400;i--;)w[500*i]=[48,500*i];setInterval(a=>{c.clearRect(0,0,500,400);for(t of x)[q,r]=t,q&&(c.fillStyle=z[q],c.fillRect(r%500,r/500|0,1,1),q&128&&.1>Math.random()&&(t[0]=0),u=r+500*(!!(q&8)-!!(q&64))+(Math.random()<.3*(q&3))*(.5<Math.random()?1:-1),2E5>u&&0<u&&(w[u][0]&48)<(q&48)||q&4&&(w[u-=500][0]&48)<(q&48)||(u=r),q&512&&w[u+500][0]&256&&(w[u+500][0]=722),w[u][1]=r,w[r]=w[u],w[u]=t,t[1]=u)},30);onclick=a=>{for(i=20;i--;)x.push([y[v%5],Math.min(a.offsetX,500)+Math.min(500*a.offsetY,2E5)])};onkeydown=a=>v++


// cellmoving
//b=[];for(i=0;1E4>i;i++)b[16E4*Math.random()|0]=6,400>i&&(b[16E4+i]=2);a=1;setInterval(()=>{c.clearRect(0,0,400,400);for(i=0;16E4>i;i++)b[i]&&(c.fillRect(i%400,i/400|0,1,1),1&b[i]^a&&(b[i]^=1,b[i]&4&&2^b[i+400]&2&&(b[i+400]=b[i],b[i]=0)));a^=1},30);

// powdergame_cells
//for(_='13~]=`a&_);W900Vn[a>>27]^lQV`QW_P-9<--O,2628N22L1L5~0K(_J16H,52447G19&&(DataImage(=t=>down+++V*(--;)54E432,108L904=t.offset,93952765,40687933=new Uint.fillm[d+p[a|4][i],109065443	:"Arrayfor(;onmouse]&2)<J2)||m[bMath.random()]&406&a>>5l=4,m(),n=[K217G5,~151,L4,121109	20N89],p={KL1ba8"N93975"G927f",~19733"5f00",L8888",1215060"40a0"~6a6"	6980"};var qBuffer(2HE4),r(q),u8Clamped(qWf=0;g=h=-1fup--fmovegX,hY;onkeyk;e{y=9;fOy;)x=9;Ox;)81>x*x+y*ym[g+xh+y)`n[k%7]^l^4Wr(42780080Wb=;bif(a=],_4&a^l){i=3;iu[4*b+i`"0x"|0;_2048.1>a=0W_4096-V-PH384+V+P82+1+1`Q),-1-1`Q)Wd=b!!J8)-!!J1024))*(!J512)||.5<)+(<1.3*J3))*(.5<?1:-1W>d0<d_H=d%Vb/V|0)(d=bWa=QW`_256?Q:];`a^4}imgu,V,600Wc.putimg,0,0Wi=7;icStyle="#"+p[n[i]|4],cRect(H*i+9,i==k%7?H:9,9,9Wl^=4;requestAnimationFrame(e)};e()';G=/[^ -FIMRSUX-^a-}]/.exec(_);)with(_.split(G))_=join(shift());eval(_)
// k=0,l=4,m=new Uint32Array(54E4),n=[1225130217,524475,131195,406879331,224,132211,1082290409,1090654432,939527650,262889],p={1225130221:"ba8",262893:"975",524479:"27f",131199:"733",406879335:"f00",228:"888",132215:"060",939527654:"0a0",1082290413:"6a6",1090654436:"980"};q=new ArrayBuffer(216E4),r=new Uint32Array(q),u=new Uint8ClampedArray(q);f=0;g=h=-1;onmousedown=t=>++f;onmouseup=t=>--f;onmousemove=t=>{g=t.offsetX,h=t.offsetY};onkeydown=t=>++k;e=t=>{for(y=9;f&&-9<--y;)for(x=9;-9<--x;)81>x*x+y*y&&(m[g+x+900*(h+y)]=n[k%7]^l^4);r.fill(4278190080);for(b=54E4;b--;)if(a=m[b],a&32&&4&a^l){for(i=3;i--;)u[4*b+i]="0x"+p[a|4][i]+p[a|4][i]|0;a&2048&&.1>Math.random()&&(a=0);a&4096&&m[b-900]&4063232&a>>5&&(m[b-900]=n[a>>27]^l);a&16384&&m[b+900]&4063232&a>>5&&(m[b+900]=n[a>>27]^l);a&8192&&(m[b+1]&4063232&a>>5&&(m[b+1]=n[a>>27]^l),m[b-1]&4063232&a>>5&&(m[b-1]=n[a>>27]^l));d=b+900*(!!(a&8)-!!(a&1024))*(!(a&512)||.5<Math.random())+(Math.random()<1.3*(a&3))*(.5<Math.random()?1:-1);54E4>d&&0<d&&(m[d]&192)<(a&192)||a&16&&(m[d=d%900+900*(b/900|0)]&192)<(a&192)||(d=b);m[d]&4063232&a>>5&&(a=n[a>>27]^l);m[b]=a&256?n[a>>27]^l:m[d];m[d]=a^4}imgData=new ImageData(u,900,600);c.putImageData(imgData,0,0);for(i=7;i--;)c.fillStyle="#"+p[n[i]|4],c.fillRect(16*i+9,i==k%7?16:9,9,9);l^=4;requestAnimationFrame(e)};e()

// eval((f=(i,o,p,c)=>(c=i.charCodeAt(p),c?f(i,o+(c<256?i[p]:o.slice(c&2047,(c&2047)+(c>>11))),++p):o))(`k=0,l=4,m=new Uint32Array(54E4),n=[1225130217,524475,131195,406879331,224á ´2211,1082290409á¡90654432,939527650,262889],p={ä€£21:"ba8"â¡°93:"975"ã€­9:"27f"ã€´á¢Ÿ733"ä »5:"f00á¢‹28:"88á¢Šâ¡Šá¢¼06á£ä§4á£”aá£ä‘1á¢’6a6âƒ©ã¡6á¢“80"};qâ ‰â ”Buffer(216â€œrè ‰q),uä ‰8Clampedä„³;f=0;g=h=-1;onmousedown=t=>++fä…¡upâ…­--ä¥³moveâ…­{g=t.offsetX,hä¦—Y}á¥¡keyå…©k;ã†for(y=9;f&&-9<--y;)â‡†xá§‹â§‘x;)81>x*x+y*y&&(m[g+x+900*(h+y)]=n[k%7]^l^4);r.fill(42781á§¼80á¥•á§‡b=â€š;b--;)if(a=m[b],a&32&&4&a^l)â§…i=3;iâˆ²u[4*b+i]="0x"+p[a|4][i]å‰§|0;a&2048&&.1>Math.random()á§³a=á¨£a&á¡˜6&&á¨»-á§¼]áªŸ632á©‚a>>5â§³ãŠ¨á¨†áª·2âˆ‹âŠœ16384âª¤â‡»êŠ­â«Ÿç«†á¨á©ƒâ«³1ê«£1æ«…,âŠ¦ê¬–á¬¾æ‹†);d=â«*(!!(á¬‰)-â­®1024))á­¬á­°512)||.5<æª‰)+(æª‰<1.3*á­°3â¿è?1:-1);â€š>d&&0<á¯–á§µd]&á¬Œ)<â¸á¯¥||â‹“ãœ=d%á§¼ã‡»b/á§¼|0)è¢(á­¥);â¯Ÿçª¯aæ«†âˆ»=á©¾56?å‹‡:âŸâ°¥=a^4}imgDatá°ºá ‹Imageâ‘¯(u,á§¼,60á¨£c.putå‘¸ã±¬,0,ã¨£i=7ã‰”câ¨”Style="#â‰¦nâ‰¸4],ã’¶Rect(16*i+9,i==á¨‰?16:9,9,9);l^=4;requestAnimationFrame(e)};e()`,``,0))

</script>
</body>
</html>
