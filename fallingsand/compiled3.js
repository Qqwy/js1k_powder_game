f=0,g=4,h=new Uint32Array(54E4),k=[1225130217,524475,131195,406879331,224,132211,1082290409,1090654432,939527650,262889],l=[];l[1225130221]="ba8";l[262893]="975";l[524479]="27f";l[131199]="733";l[406879335]="f00";l[228]="888";l[132215]="060";l[939527654]="0a0";l[1082290413]="6a6";l[1090654436]="980";var m=new ArrayBuffer(216E4),n=new Uint32Array(m),p=new Uint8ClampedArray(m),q=0,t=my=-1;onmousedown=r=>++q;onmouseup=r=>--q;
onmousemove=r=>{(t=r.offsetX)&&(my=r.offsetY)};onkeydown=r=>++f;
e=r=>{for(y=9;q&&-9<--y;)for(x=9;-9<--x;)81>x*x+y*y&&(h[t+x+900*(my+y)]=k[f%7]^g^4);n.fill(4278190080);for(b=54E4;b--;)if(a=h[b],a&32&&4&a^g){for(i=3;i--;)p[4*b+i]="0x"+l[a|4][i]+l[a|4][i]|0;a&2048&&.1>Math.random()&&(a=0);a&4096&&h[b-900]&4063232&a>>5&&(h[b-900]=k[a>>27]^g);a&16384&&h[b+900]&4063232&a>>5&&(h[b+900]=k[a>>27]^g);a&8192&&(h[b+1]&4063232&a>>5&&(h[b+1]=k[a>>27]^g),h[b-1]&4063232&a>>5&&(h[b-1]=k[a>>27]^g));d=b+900*(!!(a&8)-!!(a&1024))*(!(a&512)||.5<Math.random())+(Math.random()<
1.3*(a&3))*(.5<Math.random()?1:-1);54E4>d&&0<d&&(h[d]&192)<(a&192)||a&16&&(h[d=d%900+900*(b/900|0)]&192)<(a&192)||(d=b);h[d]&4063232&a>>5&&(a=k[a>>27]^g);h[b]=a&256?k[a>>27]^g:h[d];h[d]=a^4}imgData=new ImageData(p,900,600);c.putImageData(imgData,0,0);for(i=7;i--;)c.fillStyle="#"+l[k[i]|4],c.fillRect(16*i+9,i==f%7?16:9,9,9);g^=4;requestAnimationFrame(e)};e();
